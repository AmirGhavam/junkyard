<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Coin Flip</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        * {
            font-family: 'Poppins', sans-serif;
        }

        .coin-container {
            perspective: 1000px;
            width: 200px;
            height: 200px;
        }

        .coin {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.1s ease-out;
        }

        .coin-face {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            box-shadow:
                inset 0 0 30px rgba(255, 255, 255, 0.3),
                inset 0 0 10px rgba(255, 255, 255, 0.5),
                0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .heads {
            background: linear-gradient(145deg, #ffd700, #ffb800, #ffd700);
            color: #8b6914;
            border: 8px solid #e6a800;
        }

        .heads::before {
            content: 'üëë';
            font-size: 5rem;
            filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.3));
        }

        .tails {
            background: linear-gradient(145deg, #c0c0c0, #a8a8a8, #c0c0c0);
            color: #555;
            border: 8px solid #999;
            transform: rotateY(180deg);
        }

        .tails::before {
            content: 'ü¶Ö';
            font-size: 5rem;
            filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.3));
        }

        .coin-ring {
            position: absolute;
            inset: -10px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, #ffd700, #ffec8b, #ffd700, #ffec8b, #ffd700);
            z-index: -1;
            filter: blur(2px);
        }

        @keyframes flip {
            0% {
                transform: rotateY(0) rotateX(0);
            }

            25% {
                transform: rotateY(450deg) rotateX(20deg) scale(1.2);
            }

            50% {
                transform: rotateY(900deg) rotateX(0deg) scale(1.1);
            }

            75% {
                transform: rotateY(1350deg) rotateX(-20deg) scale(1.2);
            }

            100% {
                transform: rotateY(1800deg) rotateX(0deg) scale(1);
            }
        }

        @keyframes flipTails {
            0% {
                transform: rotateY(0) rotateX(0);
            }

            25% {
                transform: rotateY(450deg) rotateX(20deg) scale(1.2);
            }

            50% {
                transform: rotateY(900deg) rotateX(0deg) scale(1.1);
            }

            75% {
                transform: rotateY(1350deg) rotateX(-20deg) scale(1.2);
            }

            100% {
                transform: rotateY(1980deg) rotateX(0deg) scale(1);
            }
        }

        .flipping-heads {
            animation: flip 2s ease-out forwards;
        }

        .flipping-tails {
            animation: flipTails 2s ease-out forwards;
        }

        .result-popup {
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes popIn {
            0% {
                transform: scale(0) rotate(-10deg);
                opacity: 0;
            }

            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes confetti {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(400px) rotate(720deg);
                opacity: 0;
            }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            animation: confetti 2s ease-out forwards;
            pointer-events: none;
        }

        .glow-heads {
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.8);
        }

        .glow-tails {
            box-shadow: 0 0 60px rgba(192, 192, 192, 0.8);
        }

        .streak-fire {
            animation: fire 0.5s ease-in-out infinite alternate;
        }

        @keyframes fire {
            0% {
                transform: scale(1);
            }

            100% {
                transform: scale(1.2);
            }
        }

        .counter-btn {
            transition: all 0.2s ease;
        }

        .counter-btn:hover:not(:disabled) {
            transform: translateY(-2px);
        }

        .counter-btn:active:not(:disabled) {
            transform: translateY(0);
        }
    </style>
</head>

<body
    class="min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 flex flex-col items-center justify-center p-4 overflow-hidden">

    <!-- Confetti Container -->
    <div id="confetti-container" class="fixed inset-0 pointer-events-none z-50"></div>

    <div class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg">ü™ô 3D Coin Flip</h1>
        <p class="text-purple-200 text-lg">Click the coin or press SPACE to flip!</p>
    </div>

    <!-- Coin -->
    <div class="coin-container mb-8 cursor-pointer" id="coin-container" onclick="flipCoin()">
        <div class="coin-ring"></div>
        <div class="coin" id="coin">
            <div class="coin-face heads"></div>
            <div class="coin-face tails"></div>
        </div>
    </div>

    <!-- Result Display -->
    <div id="result-display" class="mb-8 h-20 flex items-center justify-center">
        <div id="result-text" class="text-3xl font-bold text-white opacity-0 transition-opacity duration-300">
            Ready to flip!
        </div>
    </div>

    <!-- Flip Button -->
    <button id="flip-btn" onclick="flipCoin()"
        class="counter-btn bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white font-bold text-xl px-10 py-4 rounded-full shadow-lg hover:shadow-xl mb-10 disabled:opacity-50 disabled:cursor-not-allowed">
        FLIP COIN
    </button>

    <!-- Stats Container -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 w-full max-w-2xl">

        <!-- Heads Counter -->
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center border border-white/20">
            <div class="text-4xl mb-2">üëë</div>
            <div class="text-3xl font-bold text-yellow-400" id="heads-count">0</div>
            <div class="text-purple-200 text-sm">Heads</div>
        </div>

        <!-- Tails Counter -->
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center border border-white/20">
            <div class="text-4xl mb-2">ü¶Ö</div>
            <div class="text-3xl font-bold text-gray-300" id="tails-count">0</div>
            <div class="text-purple-200 text-sm">Tails</div>
        </div>

        <!-- Current Streak -->
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center border border-white/20">
            <div class="text-4xl mb-2" id="streak-icon">üî•</div>
            <div class="text-3xl font-bold text-orange-400" id="current-streak">0</div>
            <div class="text-purple-200 text-sm">Current Streak</div>
        </div>

        <!-- Best Streak -->
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center border border-white/20">
            <div class="text-4xl mb-2">üèÜ</div>
            <div class="text-3xl font-bold text-green-400" id="best-streak">0</div>
            <div class="text-purple-200 text-sm">Best Streak</div>
        </div>
    </div>

    <!-- Reset Button -->
    <button onclick="resetStats()"
        class="mt-8 text-purple-300 hover:text-white transition-colors text-sm flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
        </svg>
        Reset Stats
    </button>

    <!-- Total Flips -->
    <div class="mt-4 text-purple-300 text-sm">
        Total Flips: <span id="total-flips" class="text-white font-semibold">0</span>
    </div>

    <script>
        // Game State
        let heads = 0;
        let tails = 0;
        let currentStreak = 0;
        let bestStreak = 0;
        let streakType = null; // 'heads' or 'tails'
        let isFlipping = false;
        let lastResult = null;

        // DOM Elements
        const coin = document.getElementById('coin');
        const coinContainer = document.getElementById('coin-container');
        const flipBtn = document.getElementById('flip-btn');
        const headsCount = document.getElementById('heads-count');
        const tailsCount = document.getElementById('tails-count');
        const currentStreakEl = document.getElementById('current-streak');
        const bestStreakEl = document.getElementById('best-streak');
        const streakIcon = document.getElementById('streak-icon');
        const resultText = document.getElementById('result-text');
        const totalFlipsEl = document.getElementById('total-flips');
        const confettiContainer = document.getElementById('confetti-container');

        // Flip the coin
        function flipCoin() {
            if (isFlipping) return;

            isFlipping = true;
            flipBtn.disabled = true;
            resultText.style.opacity = '0';
            coinContainer.classList.remove('glow-heads', 'glow-tails');

            // Determine result
            const isHeads = Math.random() < 0.5;

            // Remove existing animation classes
            coin.classList.remove('flipping-heads', 'flipping-tails');

            // Trigger reflow
            void coin.offsetWidth;

            // Add animation class based on result
            coin.classList.add(isHeads ? 'flipping-heads' : 'flipping-tails');

            // Play flip sound effect (visual feedback)
            createFlipParticles();

            // Show result after animation
            setTimeout(() => {
                showResult(isHeads);
                isFlipping = false;
                flipBtn.disabled = false;
            }, 2000);
        }

        // Show result
        function showResult(isHeads) {
            // Update counters
            if (isHeads) {
                heads++;
                updateStreak('heads');
                resultText.innerHTML = 'üëë <span class="text-yellow-400">HEADS!</span>';
                coinContainer.classList.add('glow-heads');
            } else {
                tails++;
                updateStreak('tails');
                resultText.innerHTML = 'ü¶Ö <span class="text-gray-300">TAILS!</span>';
                coinContainer.classList.add('glow-tails');
            }

            resultText.style.opacity = '1';
            updateDisplay();

            // Celebration effects
            if (currentStreak >= 3) {
                createConfetti();
            }
            if (currentStreak >= 5) {
                createBigConfetti();
            }
        }

        // Update streak
        function updateStreak(result) {
            if (streakType === result) {
                currentStreak++;
            } else {
                currentStreak = 1;
                streakType = result;
            }

            if (currentStreak > bestStreak) {
                bestStreak = currentStreak;
            }
        }

        // Update display
        function updateDisplay() {
            headsCount.textContent = heads;
            tailsCount.textContent = tails;
            currentStreakEl.textContent = currentStreak;
            bestStreakEl.textContent = bestStreak;
            totalFlipsEl.textContent = heads + tails;

            // Update streak icon based on type
            if (currentStreak >= 3) {
                streakIcon.textContent = streakType === 'heads' ? 'üëë' : 'ü¶Ö';
                streakIcon.classList.add('streak-fire');
            } else {
                streakIcon.textContent = 'üî•';
                streakIcon.classList.remove('streak-fire');
            }
        }

        // Create confetti
        function createConfetti() {
            const colors = ['#ffd700', '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ff9ff3'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.top = '-20px';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.animationDuration = (Math.random() * 1 + 1.5) + 's';
                    confettiContainer.appendChild(confetti);

                    setTimeout(() => confetti.remove(), 2000);
                }, i * 30);
            }
        }

        // Create big confetti (for streaks >= 5)
        function createBigConfetti() {
            const emojis = ['üéâ', '‚ú®', 'üåü', 'üí´', 'üéä', 'üëè', 'üèÜ'];
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'confetti';
                    emoji.style.left = Math.random() * 100 + 'vw';
                    emoji.style.top = '-20px';
                    emoji.style.fontSize = '2rem';
                    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.animationDuration = (Math.random() * 1 + 2) + 's';
                    confettiContainer.appendChild(emoji);

                    setTimeout(() => emoji.remove(), 3000);
                }, i * 100);
            }
        }

        // Create flip particles
        function createFlipParticles() {
            for (let i = 0; i < 10; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'fixed';
                particle.style.width = '8px';
                particle.style.height = '8px';
                particle.style.backgroundColor = ['#ffd700', '#c0c0c0'][Math.floor(Math.random() * 2)];
                particle.style.borderRadius = '50%';
                particle.style.left = (window.innerWidth / 2 + (Math.random() - 0.5) * 100) + 'px';
                particle.style.top = (window.innerHeight / 2 - 50 + (Math.random() - 0.5) * 100) + 'px';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '100';
                document.body.appendChild(particle);

                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 150 + 50;
                const vx = Math.cos(angle) * velocity;
                const vy = Math.sin(angle) * velocity;

                let x = 0, y = 0, opacity = 1;
                const animate = () => {
                    x += vx * 0.016;
                    y += vy * 0.016 + 5;
                    opacity -= 0.03;
                    particle.style.transform = `translate(${x}px, ${y}px)`;
                    particle.style.opacity = opacity;

                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        particle.remove();
                    }
                };
                requestAnimationFrame(animate);
            }
        }

        // Reset stats
        function resetStats() {
            heads = 0;
            tails = 0;
            currentStreak = 0;
            bestStreak = 0;
            streakType = null;
            updateDisplay();
            resultText.style.opacity = '0';
            coinContainer.classList.remove('glow-heads', 'glow-tails');
        }

        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                flipCoin();
            }
        });

        // Initialize display
        updateDisplay();
    </script>
</body>

</html>