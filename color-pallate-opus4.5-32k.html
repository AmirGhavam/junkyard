<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Palette Generator</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .color-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .color-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .copy-toast {
            animation: fadeInOut 2s ease-in-out;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translateY(10px);
            }

            15% {
                opacity: 1;
                transform: translateY(0);
            }

            85% {
                opacity: 1;
                transform: translateY(0);
            }

            100% {
                opacity: 0;
                transform: translateY(-10px);
            }
        }

        .history-palette {
            transition: all 0.3s ease;
        }

        .history-palette:hover {
            transform: scale(1.05);
        }
    </style>
</head>

<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-screen text-white">
    <!-- Toast Notification -->
    <div id="toast"
        class="fixed top-6 right-6 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg hidden copy-toast z-50">
        <span id="toast-message">Copied to clipboard!</span>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1
                class="text-5xl font-bold bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 bg-clip-text text-transparent mb-3">
                Color Palette Generator
            </h1>
            <p class="text-gray-400 text-lg">Create beautiful color palettes with harmony rules</p>
        </header>

        <!-- Harmony Rules -->
        <div class="flex flex-wrap justify-center gap-3 mb-8">
            <button onclick="generatePalette('random')"
                class="harmony-btn bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 px-5 py-2.5 rounded-full font-medium transition-all shadow-lg hover:shadow-pink-500/30">
                üé≤ Random
            </button>
            <button onclick="generatePalette('complementary')"
                class="harmony-btn bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 px-5 py-2.5 rounded-full font-medium transition-all shadow-lg hover:shadow-blue-500/30">
                ‚óê Complementary
            </button>
            <button onclick="generatePalette('analogous')"
                class="harmony-btn bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 px-5 py-2.5 rounded-full font-medium transition-all shadow-lg hover:shadow-green-500/30">
                ‚âà Analogous
            </button>
            <button onclick="generatePalette('triadic')"
                class="harmony-btn bg-gradient-to-r from-purple-500 to-violet-500 hover:from-purple-600 hover:to-violet-600 px-5 py-2.5 rounded-full font-medium transition-all shadow-lg hover:shadow-purple-500/30">
                ‚ñ≥ Triadic
            </button>
            <button onclick="generatePalette('split-complementary')"
                class="harmony-btn bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 px-5 py-2.5 rounded-full font-medium transition-all shadow-lg hover:shadow-orange-500/30">
                ‚ãî Split-Comp
            </button>
            <button onclick="generatePalette('tetradic')"
                class="harmony-btn bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 px-5 py-2.5 rounded-full font-medium transition-all shadow-lg hover:shadow-teal-500/30">
                ‚óá Tetradic
            </button>
            <button onclick="generatePalette('monochromatic')"
                class="harmony-btn bg-gradient-to-r from-gray-500 to-slate-500 hover:from-gray-600 hover:to-slate-600 px-5 py-2.5 rounded-full font-medium transition-all shadow-lg hover:shadow-gray-500/30">
                ‚óè Monochromatic
            </button>
        </div>

        <!-- Current Harmony Display -->
        <div class="text-center mb-6">
            <span class="bg-white/10 backdrop-blur px-4 py-2 rounded-full text-sm">
                Current: <span id="current-harmony" class="font-semibold text-purple-400">Random</span>
            </span>
        </div>

        <!-- Main Palette Display -->
        <div id="palette" class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-10">
            <!-- Colors will be inserted here -->
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-center gap-4 mb-12">
            <button onclick="generatePalette(currentHarmony)"
                class="bg-white text-gray-900 hover:bg-gray-100 px-8 py-3 rounded-xl font-semibold transition-all shadow-lg flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                    </path>
                </svg>
                Generate New
            </button>
            <button onclick="copyAllColors()"
                class="bg-purple-600 hover:bg-purple-700 px-8 py-3 rounded-xl font-semibold transition-all shadow-lg flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">
                    </path>
                </svg>
                Copy All
            </button>
            <button onclick="exportPalette()"
                class="bg-indigo-600 hover:bg-indigo-700 px-8 py-3 rounded-xl font-semibold transition-all shadow-lg flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                </svg>
                Export CSS
            </button>
        </div>

        <!-- Palette History -->
        <div class="bg-white/5 backdrop-blur rounded-2xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Palette History</h2>
                <button onclick="clearHistory()"
                    class="text-red-400 hover:text-red-300 text-sm flex items-center gap-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                        </path>
                    </svg>
                    Clear History
                </button>
            </div>
            <div id="history" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                <div class="text-gray-500 text-center py-8 col-span-full">
                    No palettes in history yet. Generate some!
                </div>
            </div>
        </div>

        <!-- Keyboard Shortcut Hint -->
        <div class="text-center mt-8 text-gray-500 text-sm">
            Press <kbd class="bg-white/10 px-2 py-1 rounded">Space</kbd> to generate a new palette
        </div>
    </div>

    <script>
        let currentPalette = [];
        let currentHarmony = 'random';
        let paletteHistory = JSON.parse(localStorage.getItem('paletteHistory') || '[]');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            generatePalette('random');
            renderHistory();
        });

        // Keyboard shortcut
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && e.target === document.body) {
                e.preventDefault();
                generatePalette(currentHarmony);
            }
        });

        // HSL to HEX conversion
        function hslToHex(h, s, l) {
            h = h % 360;
            s = Math.max(0, Math.min(100, s)) / 100;
            l = Math.max(0, Math.min(100, l)) / 100;

            const c = (1 - Math.abs(2 * l - 1)) * s;
            const x = c * (1 - Math.abs((h / 60) % 2 - 1));
            const m = l - c / 2;

            let r, g, b;
            if (h < 60) { r = c; g = x; b = 0; }
            else if (h < 120) { r = x; g = c; b = 0; }
            else if (h < 180) { r = 0; g = c; b = x; }
            else if (h < 240) { r = 0; g = x; b = c; }
            else if (h < 300) { r = x; g = 0; b = c; }
            else { r = c; g = 0; b = x; }

            const toHex = (n) => {
                const hex = Math.round((n + m) * 255).toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            };

            return `#${toHex(r)}${toHex(g)}${toHex(b)}`.toUpperCase();
        }

        // Generate random base color
        function randomHSL() {
            return {
                h: Math.floor(Math.random() * 360),
                s: Math.floor(Math.random() * 40) + 50, // 50-90%
                l: Math.floor(Math.random() * 30) + 35  // 35-65%
            };
        }

        // Color harmony generators
        function generateHarmony(type) {
            const base = randomHSL();
            let colors = [];

            switch (type) {
                case 'complementary':
                    colors = [
                        { h: base.h, s: base.s, l: base.l },
                        { h: base.h, s: base.s - 20, l: base.l + 20 },
                        { h: (base.h + 180) % 360, s: base.s, l: base.l },
                        { h: (base.h + 180) % 360, s: base.s - 15, l: base.l + 15 },
                        { h: base.h, s: base.s - 30, l: base.l - 15 }
                    ];
                    break;

                case 'analogous':
                    colors = [
                        { h: (base.h - 30 + 360) % 360, s: base.s, l: base.l },
                        { h: (base.h - 15 + 360) % 360, s: base.s, l: base.l + 10 },
                        { h: base.h, s: base.s, l: base.l },
                        { h: (base.h + 15) % 360, s: base.s, l: base.l + 10 },
                        { h: (base.h + 30) % 360, s: base.s, l: base.l }
                    ];
                    break;

                case 'triadic':
                    colors = [
                        { h: base.h, s: base.s, l: base.l },
                        { h: base.h, s: base.s - 20, l: base.l + 20 },
                        { h: (base.h + 120) % 360, s: base.s, l: base.l },
                        { h: (base.h + 240) % 360, s: base.s, l: base.l },
                        { h: (base.h + 240) % 360, s: base.s - 20, l: base.l + 20 }
                    ];
                    break;

                case 'split-complementary':
                    colors = [
                        { h: base.h, s: base.s, l: base.l },
                        { h: base.h, s: base.s - 15, l: base.l + 15 },
                        { h: (base.h + 150) % 360, s: base.s, l: base.l },
                        { h: (base.h + 210) % 360, s: base.s, l: base.l },
                        { h: (base.h + 180) % 360, s: base.s - 30, l: base.l + 25 }
                    ];
                    break;

                case 'tetradic':
                    colors = [
                        { h: base.h, s: base.s, l: base.l },
                        { h: (base.h + 90) % 360, s: base.s, l: base.l },
                        { h: (base.h + 180) % 360, s: base.s, l: base.l },
                        { h: (base.h + 270) % 360, s: base.s, l: base.l },
                        { h: base.h, s: base.s - 30, l: base.l + 25 }
                    ];
                    break;

                case 'monochromatic':
                    colors = [
                        { h: base.h, s: base.s, l: 25 },
                        { h: base.h, s: base.s, l: 40 },
                        { h: base.h, s: base.s, l: 55 },
                        { h: base.h, s: base.s, l: 70 },
                        { h: base.h, s: base.s - 20, l: 85 }
                    ];
                    break;

                default: // random
                    for (let i = 0; i < 5; i++) {
                        colors.push(randomHSL());
                    }
            }

            return colors.map(c => hslToHex(c.h, c.s, c.l));
        }

        // Get contrast color (black or white)
        function getContrastColor(hex) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
            return luminance > 0.5 ? '#000000' : '#FFFFFF';
        }

        // Generate and display palette
        function generatePalette(harmony) {
            currentHarmony = harmony;
            currentPalette = generateHarmony(harmony);

            document.getElementById('current-harmony').textContent =
                harmony.charAt(0).toUpperCase() + harmony.slice(1).replace('-', ' ');

            const paletteContainer = document.getElementById('palette');
            paletteContainer.innerHTML = currentPalette.map((color, index) => `
                <div class="color-card rounded-2xl overflow-hidden shadow-xl cursor-pointer group" 
                     onclick="copyColor('${color}')"
                     style="background-color: ${color}">
                    <div class="h-40 md:h-56 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                        <svg class="w-8 h-8" style="color: ${getContrastColor(color)}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div class="bg-black/20 backdrop-blur-sm p-4">
                        <p class="font-mono font-bold text-lg" style="color: ${getContrastColor(color)}">${color}</p>
                        <p class="text-xs opacity-70" style="color: ${getContrastColor(color)}">Click to copy</p>
                    </div>
                </div>
            `).join('');

            // Add to history
            addToHistory(currentPalette, harmony);
        }

        // Copy single color
        function copyColor(color) {
            navigator.clipboard.writeText(color);
            showToast(`Copied ${color}`);
        }

        // Copy all colors
        function copyAllColors() {
            const colors = currentPalette.join(', ');
            navigator.clipboard.writeText(colors);
            showToast('Copied all colors!');
        }

        // Export as CSS
        function exportPalette() {
            const css = `:root {\n${currentPalette.map((c, i) => `  --color-${i + 1}: ${c};`).join('\n')}\n}`;
            navigator.clipboard.writeText(css);
            showToast('Copied CSS variables!');
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').textContent = message;
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 2000);
        }

        // Add palette to history
        function addToHistory(palette, harmony) {
            paletteHistory.unshift({ colors: palette, harmony, timestamp: Date.now() });
            if (paletteHistory.length > 24) {
                paletteHistory.pop();
            }
            localStorage.setItem('paletteHistory', JSON.stringify(paletteHistory));
            renderHistory();
        }

        // Render history
        function renderHistory() {
            const historyContainer = document.getElementById('history');

            if (paletteHistory.length === 0) {
                historyContainer.innerHTML = `
                    <div class="text-gray-500 text-center py-8 col-span-full">
                        No palettes in history yet. Generate some!
                    </div>
                `;
                return;
            }

            historyContainer.innerHTML = paletteHistory.map((item, index) => `
                <div class="history-palette cursor-pointer rounded-xl overflow-hidden shadow-lg" 
                     onclick="loadFromHistory(${index})"
                     title="Click to load this palette">
                    <div class="flex h-16">
                        ${item.colors.map(c => `<div class="flex-1" style="background-color: ${c}"></div>`).join('')}
                    </div>
                    <div class="bg-white/10 px-2 py-1 text-xs text-center text-gray-400 truncate">
                        ${item.harmony}
                    </div>
                </div>
            `).join('');
        }

        // Load palette from history
        function loadFromHistory(index) {
            const item = paletteHistory[index];
            currentPalette = item.colors;
            currentHarmony = item.harmony;

            document.getElementById('current-harmony').textContent =
                item.harmony.charAt(0).toUpperCase() + item.harmony.slice(1).replace('-', ' ');

            const paletteContainer = document.getElementById('palette');
            paletteContainer.innerHTML = currentPalette.map((color, i) => `
                <div class="color-card rounded-2xl overflow-hidden shadow-xl cursor-pointer group" 
                     onclick="copyColor('${color}')"
                     style="background-color: ${color}">
                    <div class="h-40 md:h-56 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                        <svg class="w-8 h-8" style="color: ${getContrastColor(color)}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div class="bg-black/20 backdrop-blur-sm p-4">
                        <p class="font-mono font-bold text-lg" style="color: ${getContrastColor(color)}">${color}</p>
                        <p class="text-xs opacity-70" style="color: ${getContrastColor(color)}">Click to copy</p>
                    </div>
                </div>
            `).join('');

            showToast('Palette loaded from history');
        }

        // Clear history
        function clearHistory() {
            if (confirm('Are you sure you want to clear all history?')) {
                paletteHistory = [];
                localStorage.removeItem('paletteHistory');
                renderHistory();
                showToast('History cleared');
            }
        }
    </script>
</body>

</html>